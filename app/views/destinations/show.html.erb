<p class="mt-2 text-success"><%= notice %></p>

<div class="container my-4">
  <div class="alert alert-info" role="alert">
    <h5 class="alert-heading">Planning to revisit this destination?</h5>
    <p class="mb-0">If you'd like to revisit this place later, use the <strong>View</strong> button to see details, <strong>Edit</strong> to update information (dates, notes, budget), or <strong>Delete</strong> to remove it from your list. The map below shows the destination's location and helps you visualise where it is — use it to plan routes and nearby places to visit.</p>
  </div>
  <div class="card shadow">
    <div class="card-header">
      <h2><%= @destination.name %> (<%= @destination.country %>)</h2>
    </div>
    <div class="card-body">
      <p><strong>Description:</strong> <%= @destination.description %></p>
      <p><strong>Visa Required:</strong> <%= @destination.visa_required ? "Yes" : "No" %></p>
      <p><strong>Safety Score:</strong> <span class="badge bg-info text-dark"><%= @destination.safety_score %>/10</span></p>
      <p><strong>Best Season:</strong> <%= @destination.best_season %></p>
      <p><strong>Average Cost:</strong> <%= number_to_currency(@destination.average_cost) %></p>
      <p><strong>Coordinates:</strong> <%= @destination.latitude %>, <%= @destination.longitude %></p>
      <div class="my-4" data-controller="map" data-map-lat-value="<%= @destination.latitude %>" data-map-lng-value="<%= @destination.longitude %>">
        <div id="destination-map" data-map-target="map" style="width:100%;height:400px;border:1px solid #ddd;border-radius:4px"></div>
        <div data-map-target="fallback" class="text-muted small mt-2" style="display:none">Map unavailable — coordinates missing or failed to load. To fix this, edit the destination and add an address or coordinates, or check your Google Maps API settings.</div>
      </div>
    </div>
    <div class="card-footer">
      <%= link_to "Edit", edit_destination_path(@destination), class: "btn btn-outline-warning" %>
      <%= button_to "Delete", @destination, method: :delete, class: "btn btn-outline-danger", data: { confirm: "Are you sure?" } %>
      <%= link_to "Back to All Destinations", destinations_path, class: "btn btn-outline-primary" %>
    </div>
  </div>
</div>
